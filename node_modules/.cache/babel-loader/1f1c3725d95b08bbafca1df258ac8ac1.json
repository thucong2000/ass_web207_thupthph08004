{"ast":null,"code":"import _toConsumableArray from \"E:/thupthph08004/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"E:/thupthph08004/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"E:/thupthph08004/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"E:/thupthph08004/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"E:\\\\thupthph08004\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { getAll, remove, add, edit } from \"./api/productAPI\";\nimport \"./styles.css\";\nimport Routes from \"./routes\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      products = _useState2[0],\n      setProducts = _useState2[1];\n\n  useEffect(function () {\n    // call api\n    var getProducts = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _yield$getAll, data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _context.next = 3;\n                return getAll();\n\n              case 3:\n                _yield$getAll = _context.sent;\n                data = _yield$getAll.data;\n                setProducts(data);\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(\"error\", _context.t0);\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 8]]);\n      }));\n\n      return function getProducts() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    getProducts();\n  }, []); // Xóa sản phẩm\n\n  var onRemoveHandler = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      var newProducts;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return remove(id);\n\n            case 3:\n              newProducts = products.filter(function (item) {\n                return item.id !== id;\n              });\n              setProducts(newProducts);\n              _context2.next = 10;\n              break;\n\n            case 7:\n              _context2.prev = 7;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.log(_context2.t0);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 7]]);\n    }));\n\n    return function onRemoveHandler(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // Thêm sản phẩm\n\n\n  var onAddHandler = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(item) {\n      var _yield$add, data;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return add(item);\n\n            case 3:\n              _yield$add = _context3.sent;\n              data = _yield$add.data;\n              // tra ve 1 object { data: ..., status: ...}\n              setProducts([].concat(_toConsumableArray(products), [data]));\n              _context3.next = 11;\n              break;\n\n            case 8:\n              _context3.prev = 8;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.log(_context3.t0);\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 8]]);\n    }));\n\n    return function onAddHandler(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }(); // item la 1 {}\n\n\n  var onEditHandler = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(item) {\n      var _yield$edit, data, newProducts;\n\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              _context4.next = 3;\n              return edit(item);\n\n            case 3:\n              _yield$edit = _context4.sent;\n              data = _yield$edit.data;\n              newProducts = products.map(function (product) {\n                return product.id == item.id ? data : product;\n              });\n              setProducts(newProducts);\n              _context4.next = 11;\n              break;\n\n            case 9:\n              _context4.prev = 9;\n              _context4.t0 = _context4[\"catch\"](0);\n\n            case 11:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 9]]);\n    }));\n\n    return function onEditHandler(_x3) {\n      return _ref4.apply(this, arguments);\n    };\n  }(); // ví dụ: promise\n\n\n  return /*#__PURE__*/_jsxDEV(Routes, {\n    products: products,\n    onRemove: onRemoveHandler,\n    onAdd: onAddHandler,\n    onEdit: onEditHandler\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"f86L6rLANGURv6GE6gupp7+oOp4=\");\n\n_c = App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["E:/thupthph08004/src/App.js"],"names":["useEffect","useState","getAll","remove","add","edit","Routes","App","products","setProducts","getProducts","data","console","log","onRemoveHandler","id","newProducts","filter","item","onAddHandler","onEditHandler","map","product"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { getAll, remove, add, edit } from \"./api/productAPI\";\nimport \"./styles.css\";\nimport Routes from \"./routes\";\n\nexport default function App() {\n  const [products, setProducts] = useState([]);\n  useEffect(() => {\n    // call api\n    const getProducts = async () => {\n      try {\n        const { data } = await getAll();\n        setProducts(data);\n      } catch (error) {\n        console.log(\"error\", error);\n      }\n    };\n    getProducts();\n  }, []);\n  // Xóa sản phẩm\n  const onRemoveHandler = async (id) => {\n    try {\n      await remove(id);\n      const newProducts = products.filter((item) => item.id !== id);\n      setProducts(newProducts);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  // Thêm sản phẩm\n  const onAddHandler = async (item) => {\n    try {\n      const { data } = await add(item); // tra ve 1 object { data: ..., status: ...}\n      setProducts([...products, data]);\n    } catch (error) {\n      console.log(error);\n    }\n  }; // item la 1 {}\n  const onEditHandler = async (item) => {\n    try {\n      const { data } = await edit(item);\n      const newProducts = products.map((product) =>\n        product.id == item.id ? data : product\n      );\n      setProducts(newProducts);\n    } catch (error) {}\n  };\n  // ví dụ: promise\n  return (\n    <Routes\n      products={products}\n      onRemove={onRemoveHandler}\n      onAdd={onAddHandler}\n      onEdit={onEditHandler}\n    />\n  );\n}\n"]},"metadata":{},"sourceType":"module"}